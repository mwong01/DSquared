<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <title>Decisions</title>

    <!-- font  -->
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans:400,400i,700,700i|Roboto:400,400i,700,700i&display=swap" rel="stylesheet">

    <!-- CSS  -->
    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
    <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <link rel="stylesheet" href="/styles/nav.css" type="text/css" />

    <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
    <script type="text/javascript" src="/scripts/app.js"></script>

    <script src="https://use.fontawesome.com/releases/v5.11.2/js/all.js" data-auto-a11y="true"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <!-- AJAX queries -->
    <script type="text/javascript" src="/scripts/app.js"></script>

    <!-- AJAX  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </head>


  <body>

  <header>
      <% include partials/_header %>
    </header>

    <!-- make this drop down when click top right button -->

    <div class="new-poll">
        <form action="/polls/" method="POST">
          <div class="row-container"> 
            <div id="box-one">
              <label for="poll-title">Decision Maker Title</label><br>
              <input type="form" name="title" class="poll-title"> </input><br>
    
              <label for="poll-description">Any details you'd like to share?</label><br>
              <input type="form" name="details" class="poll-description"> </input><br>
    
              <label for="email">Please enter your email:</label><br>
              <input type="email" name="email" class="email" id="email"><br>
    
              <select id="options" name="choices">
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
              </select>
              <br><br>
              <div id="hide-button">
                  <button type="button" id="first-button" class="btn btn-primary">Press</button>
              </div>
            </div>
            <div id="box-two" class="box">
              <article id="option-creator">
                  
              </article>
            <input class="btn btn-primary" type="submit" value="Submit">
            </div>
    
            <small id="emailHelp" class="form-text text-muted">You will receive an confirmation email that contains a sharable voting link and results link</small><br>
          </div>
        </form>
    </div>

    <p>
        Lorem ipsum dolor amet literally polaroid hoodie whatever, beard messenger bag vice put a bird on it thundercats pitchfork seitan distillery. Tacos vexillologist cliche, meggings food truck sartorial iPhone narwhal bespoke. Echo park DIY raw denim swag. Helvetica tumeric lo-fi snackwave hexagon actually. Kitsch air plant tumblr XOXO, you probably haven't heard of them pour-over kombucha actually. Aesthetic blog raw denim four loko meditation fixie mlkshk. Cray bicycle rights vexillologist four dollar toast subway tile selvage disrupt.

        Artisan wolf keffiyeh activated charcoal ethical, kombucha aesthetic mlkshk man braid. Swag small batch four dollar toast, mixtape tofu affogato chicharrones etsy selvage truffaut gochujang. Authentic farm-to-table mixtape shabby chic. Snackwave adaptogen chartreuse, VHS pork belly tofu farm-to-table cold-pressed four dollar toast humblebrag. Edison bulb man braid retro, twee cloud bread taxidermy street art freegan direct trade stumptown microdosing jianbing. Kale chips plaid pabst bitters tofu bushwick, truffaut small batch brooklyn aesthetic direct trade chambray.

        Tattooed succulents asymmetrical, bicycle rights godard 3 wolf moon chartreuse tbh vexillologist 8-bit literally affogato knausgaard irony helvetica. Bushwick shoreditch ethical, cred vice bicycle rights disrupt. Edison bulb next level fixie pour-over, dreamcatcher tumeric echo park +1 keffiyeh. Truffaut jean shorts raclette post-ironic bicycle rights.
    </p>


    <!-- Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    
    <script>
    // Poll function for dynamic poll form
const createLiChoices = function(number){
  let $choices = $('<article  id="choice-container">').addClass('list');
  let markup = ``;
  for (let i = 1; i <= number; i++) {
    let singleChoice = `
      <textarea  name="choiceSub" class="form-control" id="${i}" rows="1" style="width: 200px;" placeholder="Choose an option!"></textarea>
    `;
    markup += singleChoice;
  }
  return $choices.append(markup);
};

// AJAX REQUESTS
$(document).ready(function(){
  $("#first-button").click( () => {
    $("#hide-button").slideToggle();

    event.preventDefault();
    const choice = $("#options").serialize();
    const number = choice.slice(choice.length-1, choice.length);
    const numInt = parseInt(number);

    $('#option-creator').append(createLiChoices(numInt));
    setTimeout(function(){ 
      $("#box-two").slideToggle();
    }, 1000);
  });
});
  </script>
  </body>
</html>
